<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FAQ ìƒ˜í”Œ ë§Œë“¤ê¸°</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700;800&display=swap');
    
    * {
      font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    }

    .tag-button {
      transition: all 0.2s ease;
    }

    .tag-button:hover {
      transform: translateY(-2px);
    }

    .tag-button.selected {
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      color: #1f2937;
      font-weight: 700;
      box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3);
    }

    .category-card {
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .category-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
    }

    .category-card.active {
      border-color: #fbbf24;
      background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
    }

    .step-indicator {
      transition: all 0.3s ease;
    }

    .step-indicator.active {
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      color: white;
      transform: scale(1.1);
    }

    .step-indicator.completed {
      background: #10b981;
      color: white;
    }

    .fade-in {
      animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .bounce {
      animation: bounce 0.5s ease infinite;
    }

    @keyframes bounce {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-10px);
      }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-gray-50 via-yellow-50/30 to-gray-50 min-h-screen">
  <div class="max-w-2xl mx-auto px-4 py-8">
    <!-- í—¤ë” -->
    <div class="text-center mb-8">
      <div class="inline-flex items-center gap-2 px-4 py-2 bg-yellow-100 rounded-full mb-4">
        <span class="text-2xl">âœ¨</span>
        <span class="text-sm font-bold text-gray-800">ì‰½ê³  ì¬ë¯¸ìˆê²Œ FAQ ë§Œë“¤ê¸°</span>
      </div>
      <h1 class="text-2xl font-bold text-gray-900 mb-2">
        í´ë¦­ë§Œìœ¼ë¡œ FAQ ì™„ì„±!
      </h1>
      <p class="text-sm text-gray-600">
        ì¹´í…Œê³ ë¦¬ì™€ í‚¤ì›Œë“œë¥¼ ì„ íƒí•˜ë©´ ìë™ìœ¼ë¡œ ì§ˆë¬¸-ë‹µë³€ì´ ë§Œë“¤ì–´ì ¸ìš”
      </p>
    </div>

    <!-- ì§„í–‰ ë‹¨ê³„ í‘œì‹œ -->
    <div class="flex items-center justify-center gap-3 mb-8">
      <div id="step1" class="step-indicator active flex items-center justify-center w-10 h-10 rounded-full bg-gray-200 font-bold text-sm">
        1
      </div>
      <div class="h-1 w-12 bg-gray-200 rounded"></div>
      <div id="step2" class="step-indicator flex items-center justify-center w-10 h-10 rounded-full bg-gray-200 font-bold text-sm">
        2
      </div>
      <div class="h-1 w-12 bg-gray-200 rounded"></div>
      <div id="step3" class="step-indicator flex items-center justify-center w-10 h-10 rounded-full bg-gray-200 font-bold text-sm">
        3
      </div>
    </div>

    <!-- Step 1: ì¹´í…Œê³ ë¦¬ ì„ íƒ -->
    <div id="categoryStep" class="fade-in">
      <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
        <h2 class="text-lg font-bold text-gray-900 mb-4">
          <span class="text-yellow-500">1ë‹¨ê³„.</span> ì–´ë–¤ ë¶„ì•¼ì˜ FAQì¸ê°€ìš”?
        </h2>
        <div class="grid grid-cols-2 gap-3">
          <div class="category-card border-2 border-gray-200 rounded-xl p-4 text-center" onclick="selectCategory('ì‹œì„¤')">
            <div class="text-3xl mb-2">ğŸ¢</div>
            <div class="font-bold text-sm">ì‹œì„¤ ì•ˆë‚´</div>
            <div class="text-xs text-gray-500 mt-1">ì˜ì—…ì‹œê°„, ìœ„ì¹˜, ì£¼ì°¨</div>
          </div>
          <div class="category-card border-2 border-gray-200 rounded-xl p-4 text-center" onclick="selectCategory('ìƒí’ˆ')">
            <div class="text-3xl mb-2">ğŸ“¦</div>
            <div class="font-bold text-sm">ìƒí’ˆ/ì„œë¹„ìŠ¤</div>
            <div class="text-xs text-gray-500 mt-1">ê°€ê²©, ì˜µì…˜, ë°°ì†¡</div>
          </div>
          <div class="category-card border-2 border-gray-200 rounded-xl p-4 text-center" onclick="selectCategory('ì˜ˆì•½')">
            <div class="text-3xl mb-2">ğŸ“…</div>
            <div class="font-bold text-sm">ì˜ˆì•½/ë°©ë¬¸</div>
            <div class="text-xs text-gray-500 mt-1">ì˜ˆì•½ë°©ë²•, ì·¨ì†Œê·œì •</div>
          </div>
          <div class="category-card border-2 border-gray-200 rounded-xl p-4 text-center" onclick="selectCategory('ì •ì±…')">
            <div class="text-3xl mb-2">ğŸ“‹</div>
            <div class="font-bold text-sm">ì •ì±…/ê·œì •</div>
            <div class="text-xs text-gray-500 mt-1">í™˜ë¶ˆ, êµí™˜, ì´ìš©ê·œì¹™</div>
          </div>
          <div class="category-card border-2 border-gray-200 rounded-xl p-4 text-center" onclick="selectCategory('ë©¤ë²„ì‹­')">
            <div class="text-3xl mb-2">ğŸ’³</div>
            <div class="font-bold text-sm">ë©¤ë²„ì‹­/í˜œíƒ</div>
            <div class="text-xs text-gray-500 mt-1">ë“±ê¸‰, í¬ì¸íŠ¸, í• ì¸</div>
          </div>
          <div class="category-card border-2 border-gray-200 rounded-xl p-4 text-center" onclick="selectCategory('ê¸°íƒ€')">
            <div class="text-3xl mb-2">ğŸ’¬</div>
            <div class="font-bold text-sm">ê¸°íƒ€</div>
            <div class="text-xs text-gray-500 mt-1">ì§ì ‘ ë§Œë“¤ê¸°</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 2: ì§ˆë¬¸ í…œí”Œë¦¿ ì„ íƒ -->
    <div id="templateStep" class="hidden">
      <div class="bg-white rounded-2xl shadow-lg p-6 mb-6 fade-in">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-bold text-gray-900">
            <span class="text-yellow-500">2ë‹¨ê³„.</span> ì§ˆë¬¸ ë§Œë“¤ê¸°
          </h2>
          <button onclick="backToCategory()" class="text-xs text-gray-500 hover:text-gray-700">
            â† ì¹´í…Œê³ ë¦¬ ë³€ê²½
          </button>
        </div>

        <!-- ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ í…œí”Œë¦¿ -->
        <div id="templateList" class="space-y-2 mb-6">
          <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
        </div>

        <!-- ë˜ëŠ” í‚¤ì›Œë“œë¡œ ì§ì ‘ ë§Œë“¤ê¸° -->
        <div class="border-t-2 border-dashed border-gray-200 pt-6">
          <h3 class="text-sm font-bold text-gray-800 mb-3">
            ğŸ¨ ë˜ëŠ” í‚¤ì›Œë“œë¥¼ ì¡°í•©í•´ì„œ ì§ì ‘ ë§Œë“¤ì–´ë³´ì„¸ìš”
          </h3>
          
          <!-- ì§ˆë¬¸ ì£¼ì œ -->
          <div class="mb-4">
            <label class="text-xs font-semibold text-gray-700 mb-2 block">ì§ˆë¬¸ ì£¼ì œ</label>
            <div id="subjectTags" class="flex flex-wrap gap-2">
              <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
            </div>
          </div>

          <!-- ì§ˆë¬¸ í‚¤ì›Œë“œ -->
          <div class="mb-4">
            <label class="text-xs font-semibold text-gray-700 mb-2 block">ê¶ê¸ˆí•œ ë‚´ìš©</label>
            <div id="keywordTags" class="flex flex-wrap gap-2">
              <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
            </div>
          </div>

          <!-- ìƒì„±ëœ ì§ˆë¬¸ ë¯¸ë¦¬ë³´ê¸° -->
          <div id="previewQuestion" class="bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4 min-h-[60px] hidden">
            <div class="text-xs text-gray-600 mb-1">ìƒì„±ëœ ì§ˆë¬¸:</div>
            <div class="text-sm font-bold text-gray-900" id="generatedQuestion"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 3: ë‹µë³€ ë§Œë“¤ê¸° -->
    <div id="answerStep" class="hidden">
      <div class="bg-white rounded-2xl shadow-lg p-6 mb-6 fade-in">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-bold text-gray-900">
            <span class="text-yellow-500">3ë‹¨ê³„.</span> ë‹µë³€ ë§Œë“¤ê¸°
          </h2>
          <button onclick="backToTemplate()" class="text-xs text-gray-500 hover:text-gray-700">
            â† ì§ˆë¬¸ ë³€ê²½
          </button>
        </div>

        <!-- ì„ íƒí•œ ì§ˆë¬¸ í‘œì‹œ -->
        <div class="bg-gray-50 rounded-lg p-4 mb-6">
          <div class="text-xs text-gray-600 mb-1">ì§ˆë¬¸</div>
          <div class="text-sm font-bold text-gray-900" id="finalQuestion"></div>
        </div>

        <!-- ë‹µë³€ êµ¬ì„± ìš”ì†Œ ì„ íƒ -->
        <div class="space-y-4 mb-6">
          <!-- ë‹µë³€ ìœ í˜• -->
          <div>
            <label class="text-xs font-semibold text-gray-700 mb-2 block">ë‹µë³€ ìœ í˜•</label>
            <div id="answerTypeTags" class="flex flex-wrap gap-2">
              <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
            </div>
          </div>

          <!-- ì„¸ë¶€ ì •ë³´ -->
          <div>
            <label class="text-xs font-semibold text-gray-700 mb-2 block">ì„¸ë¶€ ì •ë³´ (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</label>
            <div id="detailTags" class="flex flex-wrap gap-2">
              <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
            </div>
          </div>

          <!-- ì¶”ê°€ ë‚´ìš© ì…ë ¥ -->
          <div>
            <label class="text-xs font-semibold text-gray-700 mb-2 block">ì¶”ê°€ë¡œ ì„¤ëª…í•  ë‚´ìš©ì´ ìˆë‚˜ìš”?</label>
            <textarea
              id="additionalText"
              rows="3"
              class="w-full px-3 py-2 text-sm bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-400/50 focus:border-yellow-400 focus:outline-none resize-none transition-all text-gray-900 placeholder:text-gray-400"
              placeholder="ì˜ˆ: ì›”ìš”ì¼ì€ íœ´ë¬´ì…ë‹ˆë‹¤"
            ></textarea>
          </div>
        </div>

        <!-- ìƒì„±ëœ ë‹µë³€ ë¯¸ë¦¬ë³´ê¸° -->
        <div class="bg-gradient-to-br from-yellow-50 to-amber-50 border-2 border-yellow-200 rounded-xl p-5 mb-6">
          <div class="flex items-center gap-2 mb-3">
            <span class="text-lg">âœ¨</span>
            <div class="text-xs font-bold text-gray-700">ìƒì„±ëœ ë‹µë³€</div>
          </div>
          <div class="text-sm text-gray-900 whitespace-pre-wrap min-h-[80px]" id="generatedAnswer">
            ë‹µë³€ ìš”ì†Œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”
          </div>
        </div>
      </div>
    </div>

    <!-- í•˜ë‹¨ ë²„íŠ¼ -->
    <div class="flex gap-3">
      <button
        id="backBtn"
        onclick="handleBack()"
        class="px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all font-semibold text-sm hidden"
      >
        ì´ì „
      </button>
      <button
        id="nextBtn"
        onclick="handleNext()"
        class="flex-1 px-6 py-3 bg-gradient-to-r from-yellow-400 to-amber-400 text-gray-900 rounded-xl hover:shadow-lg hover:-translate-y-1 transition-all font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed hidden"
        disabled
      >
        ë‹¤ìŒ ë‹¨ê³„ë¡œ
      </button>
      <button
        id="completeBtn"
        onclick="handleComplete()"
        class="flex-1 px-6 py-3 bg-gradient-to-r from-green-400 to-emerald-400 text-white rounded-xl hover:shadow-lg hover:-translate-y-1 transition-all font-bold text-sm hidden bounce"
      >
        ì™„ì„±! ğŸ‰
      </button>
    </div>
  </div>

  <script>
    // ìƒíƒœ ê´€ë¦¬
    let currentStep = 1;
    let selectedCategory = '';
    let selectedQuestion = '';
    let selectedSubjects = [];
    let selectedKeywords = [];
    let selectedAnswerType = '';
    let selectedDetails = [];

    // ì¹´í…Œê³ ë¦¬ë³„ ë°ì´í„°
    const categoryData = {
      'ì‹œì„¤': {
        templates: [
          'ì˜ì—…ì‹œê°„ì´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?',
          'ì£¼ì°¨ëŠ” ì–´ë””ì— í•˜ë‚˜ìš”?',
          'ìœ„ì¹˜ê°€ ì–´ë””ì¸ê°€ìš”?',
          'ì°¾ì•„ê°€ëŠ” ë°©ë²•ì„ ì•Œë ¤ì£¼ì„¸ìš”',
          'ì£¼ë§ì—ë„ ìš´ì˜í•˜ë‚˜ìš”?',
          'ê³µíœ´ì¼ì—ë„ ì˜ì—…í•˜ë‚˜ìš”?',
          'ì™€ì´íŒŒì´ê°€ ìˆë‚˜ìš”?',
          'ëª‡ ì‹œì— ë¬¸ ë‹«ë‚˜ìš”?',
          'ëŒ€ì¤‘êµí†µìœ¼ë¡œ ì–´ë–»ê²Œ ê°€ë‚˜ìš”?'
        ],
        subjects: ['ì˜ì—…ì‹œê°„', 'ìœ„ì¹˜', 'ì£¼ì°¨', 'êµí†µ', 'ì‹œì„¤', 'í¸ì˜ì‹œì„¤', 'íœ´ë¬´ì¼', 'ê³µíœ´ì¼'],
        keywords: ['ì–¸ì œ', 'ì–´ë””', 'ëª‡ì‹œ', 'ëª‡ì‹œê¹Œì§€', 'ê°€ëŠ” ë°©ë²•', 'ìš´ì˜', 'ì´ìš©', 'ìˆë‚˜ìš”', 'ë˜ë‚˜ìš”']
      },
      'ìƒí’ˆ': {
        templates: [
          'ê°€ê²©ì´ ì–¼ë§ˆì¸ê°€ìš”?',
          'ë°°ì†¡ì€ ì–¼ë§ˆë‚˜ ê±¸ë¦¬ë‚˜ìš”?',
          'ì–´ë–¤ ì˜µì…˜ì´ ìˆë‚˜ìš”?',
          'ì¬ê³ ê°€ ìˆë‚˜ìš”?',
          'í• ì¸ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?',
          'ë°°ì†¡ë¹„ëŠ” ì–¼ë§ˆì¸ê°€ìš”?',
          'ë°˜í’ˆ ê°€ëŠ¥í•œê°€ìš”?',
          'ì‚¬ì´ì¦ˆê°€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?',
          'í’ˆì ˆë˜ë©´ ì–¸ì œ ë“¤ì–´ì˜¤ë‚˜ìš”?'
        ],
        subjects: ['ê°€ê²©', 'ë°°ì†¡', 'ì˜µì…˜', 'ì¬ê³ ', 'í• ì¸', 'ê²°ì œ', 'ë°˜í’ˆ', 'êµí™˜', 'ì‚¬ì´ì¦ˆ'],
        keywords: ['ì–¼ë§ˆ', 'ì–¸ì œ', 'ì–´ë–¤', 'ìˆë‚˜ìš”', 'ë°©ë²•', 'ê°€ëŠ¥', 'ë˜ë‚˜ìš”', 'ê¸°ê°„', 'ì¡°ê±´']
      },
      'ì˜ˆì•½': {
        templates: [
          'ì˜ˆì•½ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?',
          'ì˜ˆì•½ ì·¨ì†ŒëŠ” ì–´ë–»ê²Œ í•˜ë‚˜ìš”?',
          'ë‹¹ì¼ ì˜ˆì•½ ê°€ëŠ¥í•œê°€ìš”?',
          'ì˜ˆì•½ ë³€ê²½í•  ìˆ˜ ìˆë‚˜ìš”?',
          'ë…¸ì‡¼ ì •ì±…ì´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?',
          'ì˜ˆì•½ê¸ˆì´ í•„ìš”í•œê°€ìš”?',
          'ëª‡ ëª…ê¹Œì§€ ì˜ˆì•½ ê°€ëŠ¥í•œê°€ìš”?',
          'ì˜ˆì•½ í™•ì¸ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?',
          'ëŒ€ê¸° ì˜ˆì•½ë„ ë°›ë‚˜ìš”?'
        ],
        subjects: ['ì˜ˆì•½', 'ì·¨ì†Œ', 'ë³€ê²½', 'ë‹¹ì¼ì˜ˆì•½', 'ëŒ€ê¸°', 'í™•ì¸', 'ì˜ˆì•½ê¸ˆ', 'ì¸ì›'],
        keywords: ['ë°©ë²•', 'ê°€ëŠ¥', 'ê·œì •', 'ì–¸ì œê¹Œì§€', 'ì–´ë–»ê²Œ', 'ì¡°ê±´', 'ë˜ë‚˜ìš”', 'ìˆë‚˜ìš”']
      },
      'ì •ì±…': {
        templates: [
          'í™˜ë¶ˆ ì •ì±…ì´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?',
          'êµí™˜ ê°€ëŠ¥í•œê°€ìš”?',
          'ì´ìš© ê·œì¹™ì´ ìˆë‚˜ìš”?',
          'ìœ„ì•½ê¸ˆì´ ìˆë‚˜ìš”?',
          'íšŒì› ê°€ì… í•„ìˆ˜ì¸ê°€ìš”?',
          'ê°œì¸ì •ë³´ëŠ” ì–´ë–»ê²Œ ê´€ë¦¬ë˜ë‚˜ìš”?',
          'í™˜ë¶ˆì€ ì–¸ì œ ë˜ë‚˜ìš”?',
          'ì•½ê´€ì€ ì–´ë””ì„œ ë³¼ ìˆ˜ ìˆë‚˜ìš”?'
        ],
        subjects: ['í™˜ë¶ˆ', 'êµí™˜', 'ê·œì¹™', 'ìœ„ì•½ê¸ˆ', 'ê°€ì…', 'ì•½ê´€', 'ê°œì¸ì •ë³´', 'ì´ìš©ì¡°ê±´'],
        keywords: ['ì •ì±…', 'ê·œì •', 'ì¡°ê±´', 'ê°€ëŠ¥', 'í•„ìš”', 'ê¸°ê°„', 'ë°©ë²•', 'ì–´ë–»ê²Œ']
      },
      'ë©¤ë²„ì‹­': {
        templates: [
          'ë©¤ë²„ì‹­ í˜œíƒì´ ë­ê°€ ìˆë‚˜ìš”?',
          'ë“±ê¸‰ì€ ì–´ë–»ê²Œ ì˜¬ë¼ê°€ë‚˜ìš”?',
          'í¬ì¸íŠ¸ëŠ” ì–´ë–»ê²Œ ìŒ“ì´ë‚˜ìš”?',
          'í¬ì¸íŠ¸ ìœ íš¨ê¸°ê°„ì´ ìˆë‚˜ìš”?',
          'ê°€ì¡± íšŒì› ë“±ë¡ ë˜ë‚˜ìš”?',
          'ë“±ê¸‰ ìœ ì§€ ì¡°ê±´ì´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?',
          'í¬ì¸íŠ¸ë¡œ ë­˜ ì‚´ ìˆ˜ ìˆë‚˜ìš”?',
          'ì¿ í°ì€ ì–´ë–»ê²Œ ë°›ë‚˜ìš”?'
        ],
        subjects: ['ë©¤ë²„ì‹­', 'ë“±ê¸‰', 'í¬ì¸íŠ¸', 'í˜œíƒ', 'í• ì¸', 'ê°€ì¡±íšŒì›', 'ì¿ í°', 'ì ë¦½'],
        keywords: ['í˜œíƒ', 'ì¡°ê±´', 'ë°©ë²•', 'ê¸°ê°„', 'ì ë¦½', 'ì‚¬ìš©', 'ì–´ë–»ê²Œ', 'ë­ê°€']
      },
      'ê¸°íƒ€': {
        templates: [
          'ë¬¸ì˜ëŠ” ì–´ë””ë¡œ í•˜ë‚˜ìš”?',
          'ê³ ê°ì„¼í„° ìš´ì˜ì‹œê°„ì€?',
          'ì´ë©”ì¼ë¡œ ë¬¸ì˜ ê°€ëŠ¥í•œê°€ìš”?',
          'ì „í™”ë²ˆí˜¸ ì•Œë ¤ì£¼ì„¸ìš”'
        ],
        subjects: ['ë¬¸ì˜', 'ìƒë‹´', 'ê³ ê°ì„¼í„°', 'ì—°ë½ì²˜', 'ì´ë©”ì¼', 'ì±„íŒ…', 'ì „í™”'],
        keywords: ['ë°©ë²•', 'ì‹œê°„', 'ì—°ë½', 'ì–´ë””', 'ê°€ëŠ¥', 'ë¬¸ì˜', 'ì•Œë ¤ì£¼ì„¸ìš”']
      }
    };

    // ë‹µë³€ êµ¬ì„± ìš”ì†Œ
    const answerComponents = {
      types: [
        'ì‹œê°„ ì•ˆë‚´', 
        'ì¥ì†Œ ì•ˆë‚´', 
        'ë°©ë²• ì•ˆë‚´', 
        'ê°€ê²© ì•ˆë‚´', 
        'ì¡°ê±´ ì•ˆë‚´', 
        'ì—°ë½ì²˜ ì•ˆë‚´',
        'ì ˆì°¨ ì•ˆë‚´',
        'ë§í¬ ì œê³µ'
      ],
      details: [
        'í‰ì¼ ì‹œê°„',
        'ì£¼ë§ ì‹œê°„',
        'ê³µíœ´ì¼',
        'ì ì‹¬ì‹œê°„',
        'ê°€ê²©/ìš”ê¸ˆ',
        'í• ì¸ ì •ë³´',
        'ìœ„ì¹˜/ì£¼ì†Œ',
        'ì „í™”ë²ˆí˜¸',
        'ì´ë©”ì¼',
        'ì¹´ì¹´ì˜¤í†¡',
        'ì˜ˆì•½ë§í¬',
        'í™ˆí˜ì´ì§€',
        'ì£¼ì˜ì‚¬í•­',
        'ì¤€ë¹„ë¬¼',
        'ì†Œìš”ì‹œê°„',
        'ì¸ì›ì œí•œ',
        'ì—°ë ¹ì œí•œ',
        'ì£¼ì°¨ ì •ë³´',
        'êµí†µí¸',
        'ê²°ì œ ë°©ë²•',
        'í™˜ë¶ˆ ê·œì •',
        'ë³€ê²½ ê·œì •'
      ]
    };

    // ì¹´í…Œê³ ë¦¬ ì„ íƒ
    function selectCategory(category) {
      selectedCategory = category;
      
      // ì¹´í…Œê³ ë¦¬ ì¹´ë“œ í™œì„±í™” í‘œì‹œ
      document.querySelectorAll('.category-card').forEach(card => {
        card.classList.remove('active');
      });
      event.currentTarget.classList.add('active');

      // ë‹¤ìŒ ë‹¨ê³„ë¡œ
      setTimeout(() => {
        currentStep = 2;
        updateStepUI();
        showTemplateStep();
      }, 300);
    }

    // í…œí”Œë¦¿ ë‹¨ê³„ í‘œì‹œ
    function showTemplateStep() {
      document.getElementById('categoryStep').classList.add('hidden');
      document.getElementById('templateStep').classList.remove('hidden');

      const data = categoryData[selectedCategory];
      
      // í…œí”Œë¦¿ ëª©ë¡ ìƒì„±
      const templateList = document.getElementById('templateList');
      templateList.innerHTML = `
        <div class="text-xs font-semibold text-gray-700 mb-3">
          ğŸ’¡ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ì„ ì„ íƒí•˜ê±°ë‚˜, ì•„ë˜ì—ì„œ ì§ì ‘ ë§Œë“¤ì–´ë³´ì„¸ìš”
        </div>
        ${data.templates.map(template => `
          <button
            onclick="selectTemplate('${template}')"
            class="w-full text-left px-4 py-3 bg-gray-50 hover:bg-yellow-50 border border-gray-200 hover:border-yellow-300 rounded-lg transition-all text-sm"
          >
            ${template}
          </button>
        `).join('')}
      `;

      // ì£¼ì œ íƒœê·¸ ìƒì„±
      const subjectTags = document.getElementById('subjectTags');
      subjectTags.innerHTML = data.subjects.map(subject => `
        <button
          onclick="toggleSubject('${subject}')"
          class="tag-button px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-xs font-medium hover:bg-gray-200"
        >
          ${subject}
        </button>
      `).join('');

      // í‚¤ì›Œë“œ íƒœê·¸ ìƒì„±
      const keywordTags = document.getElementById('keywordTags');
      keywordTags.innerHTML = data.keywords.map(keyword => `
        <button
          onclick="toggleKeyword('${keyword}')"
          class="tag-button px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-xs font-medium hover:bg-gray-200"
        >
          ${keyword}
        </button>
      `).join('');

      updateNextButton();
    }

    // í…œí”Œë¦¿ ì„ íƒ
    function selectTemplate(template) {
      selectedQuestion = template;
      event.currentTarget.classList.add('bg-yellow-100', 'border-yellow-400', 'font-bold');
      
      setTimeout(() => {
        currentStep = 3;
        updateStepUI();
        showAnswerStep();
      }, 300);
    }

    // ì£¼ì œ í† ê¸€
    function toggleSubject(subject) {
      const btn = event.currentTarget;
      const index = selectedSubjects.indexOf(subject);
      
      if (index > -1) {
        selectedSubjects.splice(index, 1);
        btn.classList.remove('selected');
      } else {
        selectedSubjects = [subject]; // ë‹¨ì¼ ì„ íƒ
        document.querySelectorAll('#subjectTags .tag-button').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
      }
      
      updateGeneratedQuestion();
    }

    // í‚¤ì›Œë“œ í† ê¸€
    function toggleKeyword(keyword) {
      const btn = event.currentTarget;
      const index = selectedKeywords.indexOf(keyword);
      
      if (index > -1) {
        selectedKeywords.splice(index, 1);
        btn.classList.remove('selected');
      } else {
        selectedKeywords = [keyword]; // ë‹¨ì¼ ì„ íƒ
        document.querySelectorAll('#keywordTags .tag-button').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
      }
      
      updateGeneratedQuestion();
    }

    // ì§ˆë¬¸ ìƒì„±
    function updateGeneratedQuestion() {
      if (selectedSubjects.length > 0 && selectedKeywords.length > 0) {
        const question = `${selectedSubjects[0]} ${selectedKeywords[0]}?`;
        document.getElementById('generatedQuestion').textContent = question;
        document.getElementById('previewQuestion').classList.remove('hidden');
        selectedQuestion = question;
        updateNextButton();
      } else {
        document.getElementById('previewQuestion').classList.add('hidden');
        selectedQuestion = '';
        updateNextButton();
      }
    }

    // ë‹µë³€ ë‹¨ê³„ í‘œì‹œ
    function showAnswerStep() {
      document.getElementById('templateStep').classList.add('hidden');
      document.getElementById('answerStep').classList.remove('hidden');
      
      document.getElementById('finalQuestion').textContent = selectedQuestion;

      // ë‹µë³€ ìœ í˜• íƒœê·¸
      const answerTypeTags = document.getElementById('answerTypeTags');
      answerTypeTags.innerHTML = answerComponents.types.map(type => `
        <button
          onclick="toggleAnswerType('${type}')"
          class="tag-button px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-xs font-medium hover:bg-gray-200"
        >
          ${type}
        </button>
      `).join('');

      // ì„¸ë¶€ ì •ë³´ íƒœê·¸
      const detailTags = document.getElementById('detailTags');
      detailTags.innerHTML = answerComponents.details.map(detail => `
        <button
          onclick="toggleDetail('${detail}')"
          class="tag-button px-2.5 py-1.5 bg-gray-100 text-gray-600 rounded-lg text-xs hover:bg-gray-200"
        >
          ${detail}
        </button>
      `).join('');

      // ì¶”ê°€ í…ìŠ¤íŠ¸ ì…ë ¥ ì´ë²¤íŠ¸
      document.getElementById('additionalText').addEventListener('input', updateGeneratedAnswer);

      updateNextButton();
    }

    // ë‹µë³€ ìœ í˜• í† ê¸€
    function toggleAnswerType(type) {
      const btn = event.currentTarget;
      
      selectedAnswerType = type;
      document.querySelectorAll('#answerTypeTags .tag-button').forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
      
      updateGeneratedAnswer();
    }

    // ì„¸ë¶€ ì •ë³´ í† ê¸€ (ë³µìˆ˜ ì„ íƒ)
    function toggleDetail(detail) {
      const btn = event.currentTarget;
      const index = selectedDetails.indexOf(detail);
      
      if (index > -1) {
        selectedDetails.splice(index, 1);
        btn.classList.remove('selected');
      } else {
        selectedDetails.push(detail);
        btn.classList.add('selected');
      }
      
      updateGeneratedAnswer();
    }

    // ë‹µë³€ ìƒì„±
    function updateGeneratedAnswer() {
      let answer = '';
      
      if (selectedAnswerType) {
        answer += `[${selectedAnswerType}]\n`;
      }
      
      if (selectedDetails.length > 0) {
        answer += selectedDetails.map(detail => `â€¢ ${detail}: [ì—¬ê¸°ì— ì •ë³´ ì…ë ¥]`).join('\n');
        answer += '\n\n';
      }
      
      const additionalText = document.getElementById('additionalText').value;
      if (additionalText) {
        answer += additionalText;
      }
      
      if (!answer) {
        answer = 'ë‹µë³€ ìš”ì†Œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”';
      }
      
      document.getElementById('generatedAnswer').textContent = answer;
      updateCompleteButton();
    }

    // UI ì—…ë°ì´íŠ¸
    function updateStepUI() {
      // ë‹¨ê³„ ì¸ë””ì¼€ì´í„°
      for (let i = 1; i <= 3; i++) {
        const step = document.getElementById(`step${i}`);
        if (i < currentStep) {
          step.classList.add('completed');
          step.classList.remove('active');
        } else if (i === currentStep) {
          step.classList.add('active');
          step.classList.remove('completed');
        } else {
          step.classList.remove('active', 'completed');
        }
      }

      // ë²„íŠ¼ í‘œì‹œ
      document.getElementById('backBtn').classList.toggle('hidden', currentStep === 1);
      document.getElementById('nextBtn').classList.toggle('hidden', currentStep === 3);
      document.getElementById('completeBtn').classList.toggle('hidden', currentStep !== 3);
    }

    function updateNextButton() {
      const nextBtn = document.getElementById('nextBtn');
      if (currentStep === 2) {
        nextBtn.disabled = !selectedQuestion;
      }
    }

    function updateCompleteButton() {
      const completeBtn = document.getElementById('completeBtn');
      completeBtn.disabled = !selectedAnswerType && selectedDetails.length === 0;
    }

    // ë„¤ë¹„ê²Œì´ì…˜
    function backToCategory() {
      currentStep = 1;
      selectedQuestion = '';
      selectedSubjects = [];
      selectedKeywords = [];
      updateStepUI();
      document.getElementById('templateStep').classList.add('hidden');
      document.getElementById('categoryStep').classList.remove('hidden');
    }

    function backToTemplate() {
      currentStep = 2;
      selectedAnswerType = '';
      selectedDetails = [];
      updateStepUI();
      document.getElementById('answerStep').classList.add('hidden');
      document.getElementById('templateStep').classList.remove('hidden');
    }

    function handleBack() {
      if (currentStep === 2) {
        backToCategory();
      } else if (currentStep === 3) {
        backToTemplate();
      }
    }

    function handleNext() {
      if (currentStep === 2 && selectedQuestion) {
        currentStep = 3;
        updateStepUI();
        showAnswerStep();
      }
    }

    function handleComplete() {
      const result = {
        category: selectedCategory,
        question: selectedQuestion,
        answerType: selectedAnswerType,
        details: selectedDetails,
        additionalText: document.getElementById('additionalText').value,
        fullAnswer: document.getElementById('generatedAnswer').textContent
      };

      // ë¶€ëª¨ ì°½ìœ¼ë¡œ ë°ì´í„° ì „ë‹¬ (ëª¨ë‹¬ì—ì„œ ì—´ì—ˆì„ ê²½ìš°)
      if (window.opener) {
        window.opener.postMessage({
          type: 'FAQ_SAMPLE_COMPLETE',
          data: result
        }, '*');
        window.close();
      } else {
        // ë‹¨ë… í˜ì´ì§€ë¡œ ì—´ì—ˆì„ ê²½ìš° - ì½˜ì†”ì— ì¶œë ¥ ë° ì•Œë¦¼
        console.log('ìƒì„±ëœ FAQ:', result);
        alert('FAQê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!\n\n' + 
              'ì§ˆë¬¸: ' + result.question + '\n\n' +
              'ë‹µë³€:\n' + result.fullAnswer);
        
        // ì´ˆê¸°í™”
        location.reload();
      }
    }

    // ì´ˆê¸°í™”
    updateStepUI();
  </script>
</body>
</html>